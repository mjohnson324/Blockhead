!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=15)}([function(t,e){const i=document.getElementById("block-rectangle"),s=document.getElementById("block-square"),n=document.getElementById("fall"),o=document.getElementById("complete-level"),l=document.getElementById("game-song"),r=document.getElementById("menu-song");r.loop=!0,l.loop=!0;t.exports={playBlockSound:function(t){t.height===t.width?s.play():i.play()},playFallSound:function(){n.play()},playGoalSound:function(){o.play()},GameMusic:class{constructor(){this.playMusic=!0,this.currentMusic=r,this.toggleMusic=this.toggleMusic.bind(this),this.musicButton=null,this.musicDisplay=null}switchTrack(t){const e=!0===t?r:l;this.currentMusic.currentTime=0,!0===this.playMusic?(this.currentMusic.pause(),this.currentMusic=e,this.currentMusic.play()):this.currentMusic=e}setupSoundButton(t){t({id:"music",event:this.toggleMusic,text:null}),function(){const t=document.createElement("i");t.setAttribute("id","music-icon"),t.className="fas fa-volume-up fa-2x",document.getElementById("music").appendChild(t)}(this.musicButton),this.musicButton=document.getElementById("music"),this.musicDisplay=document.getElementById("music-icon"),this.musicButton.addEventListener("click",this.toggleMusic)}toggleMusic(t){t.preventDefault(),!0===this.playMusic?this.pauseMusic():this.resumeMusic()}pauseMusic(){this.playMusic=!1,this.musicDisplay.className="fas fa-volume-mute fa-2x",this.currentMusic.pause()}resumeMusic(){this.playMusic=!0,this.musicDisplay.className="fas fa-volume-up fa-2x",this.currentMusic.play()}}}},function(t,e){t.exports=class{start(t,e,i){t.drawMenu(e.boardSize);const s={id:"start-button",event:e.startGame,text:"Start"},n={id:"controls-button",event:e.showControls,text:"Controls"};i.addButton(s),i.addButton(n)}controlsMenu(t,e,i){t.drawControls(e.boardSize);const s={id:"back-button",event:e.redrawMenu,text:"Back"};i.addButton(s),i.removeButton({id:"start-button",event:e.startGame}),i.removeButton({id:"controls-button",event:e.showControls})}}},function(t,e){t.exports={floorDimensions:{xRange:14,yRange:10},floorData:[{x:0,y:6,type:"s"},{x:13,y:5,type:"g"},{x:1,y:6,type:"n"},{x:2,y:6,type:"n"},{x:3,y:6,type:"n"},{x:4,y:6,type:"n"},{x:4,y:5,type:"n"},{x:4,y:4,type:"n"},{x:5,y:9,type:"n"},{x:5,y:8,type:"n"},{x:5,y:7,type:"n"},{x:5,y:6,type:"n"},{x:5,y:5,type:"n"},{x:5,y:4,type:"n"},{x:6,y:9,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:6,y:2,type:"n"},{x:6,y:1,type:"n"},{x:7,y:9,type:"n"},{x:7,y:2,type:"n"},{x:7,y:1,type:"n"},{x:7,y:0,type:"n"},{x:8,y:9,type:"n"},{x:8,y:8,type:"n"},{x:8,y:7,type:"n"},{x:8,y:2,type:"n"},{x:8,y:1,type:"n"},{x:8,y:0,type:"n"},{x:9,y:9,type:"n"},{x:9,y:8,type:"n"},{x:9,y:7,type:"n"},{x:9,y:3,type:"n"},{x:9,y:2,type:"n"},{x:9,y:1,type:"n"},{x:9,y:0,type:"n"},{x:10,y:9,type:"n"},{x:10,y:8,type:"n"},{x:10,y:7,type:"n"},{x:10,y:3,type:"n"},{x:10,y:2,type:"n"},{x:10,y:1,type:"n"},{x:11,y:7,type:"n"},{x:11,y:6,type:"n"},{x:11,y:5,type:"n"},{x:12,y:7,type:"n"},{x:12,y:6,type:"n"},{x:12,y:5,type:"n"},{x:13,y:6,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:15,yRange:6},floorData:[{x:1,y:2,type:"s"},{x:13,y:2,type:"g"},{x:0,y:4,type:"n"},{x:0,y:3,type:"n"},{x:0,y:2,type:"n"},{x:0,y:1,type:"n"},{x:1,y:4,type:"n"},{x:1,y:3,type:"n"},{x:1,y:1,type:"n"},{x:2,y:4,type:"n"},{x:2,y:3,type:"n"},{x:2,y:2,type:"n"},{x:2,y:1,type:"n"},{x:3,y:4,type:"n"},{x:3,y:3,type:"n"},{x:3,y:2,type:"n"},{x:3,y:1,type:"n"},{x:4,y:3,type:"n"},{x:5,y:3,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:7,y:5,type:"n"},{x:7,y:4,type:"n"},{x:7,y:3,type:"n"},{x:8,y:5,type:"n"},{x:8,y:4,type:"n"},{x:8,y:3,type:"n"},{x:9,y:5,type:"n"},{x:10,y:5,type:"n"},{x:11,y:5,type:"n"},{x:11,y:4,type:"n"},{x:11,y:3,type:"n"},{x:11,y:2,type:"n"},{x:11,y:1,type:"n"},{x:12,y:5,type:"n"},{x:12,y:4,type:"n"},{x:12,y:3,type:"n"},{x:12,y:2,type:"n"},{x:12,y:1,type:"n"},{x:12,y:0,type:"n"},{x:13,y:3,type:"n"},{x:13,y:1,type:"n"},{x:13,y:0,type:"n"},{x:14,y:3,type:"n"},{x:14,y:2,type:"n"},{x:14,y:1,type:"n"},{x:14,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:6},floorData:[{x:1,y:1,type:"s"},{x:7,y:4,type:"g"},{x:0,y:0,type:"n"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:1,y:0,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:5,y:1,type:"n"},{x:5,y:2,type:"n"},{x:5,y:3,type:"n"},{x:5,y:4,type:"n"},{x:6,y:2,type:"n"},{x:6,y:3,type:"n"},{x:6,y:4,type:"n"},{x:6,y:5,type:"n"},{x:7,y:2,type:"n"},{x:7,y:3,type:"n"},{x:7,y:5,type:"n"},{x:8,y:2,type:"n"},{x:8,y:3,type:"n"},{x:8,y:4,type:"n"},{x:8,y:5,type:"n"},{x:9,y:3,type:"n"},{x:9,y:4,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:1},floorData:[{x:0,y:0,type:"s"},{x:9,y:0,type:"g"},{x:1,y:0,type:"n"},{x:2,y:0,type:"n"},{x:3,y:0,type:"n"},{x:4,y:0,type:"n"},{x:5,y:0,type:"n"},{x:6,y:0,type:"n"},{x:7,y:0,type:"n"},{x:8,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:5,yRange:5},floorData:[{x:0,y:0,type:"s"},{x:2,y:2,type:"g"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:1,y:0,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:3,y:0,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:3,y:4,type:"n"},{x:4,y:0,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:4,y:4,type:"n"}]}},function(t,e,i){const s=i(6),n=i(5),o=i(4),l=i(3),r=i(2);t.exports={tutorial:s,1:n,2:o,3:l,4:r}},function(t,e){t.exports=class{constructor(t){this.xPos=t.x,this.yPos=t.y,this.type=this.typeReference(t.type),this.active=this.checkActiveStatus(t.active)}typeReference(t){switch(t){case"n":return"none";case"s":return"start";case"g":return"goal";case"c":return"collapsible";case"w":return"warp";case"a":return"activator";case"b":return"bridge"}}checkActiveStatus(t){return void 0===t||t}toggleActive(){"bridge"===this.type&&(this.active=!this.active)}}},function(t,e,i){const s=i(8),n=i(7);t.exports=class{constructor(){this.currentLevel=1,this.levelData=n,this.constructTileCoordinates=this.constructTileCoordinates.bind(this)}nextLevel(){this.currentLevel+=1}resetCurrentLevel(){this.currentLevel=1}constructFloor(t,e){this.constructedFloor=this.generateLevel(t,e),this.currentStartPosition=this.getStart(this.constructedFloor)}getStart(t){for(var e in t){let i=t[e];if("start"===i.type)return{xPos:i.xPos,yPos:i.yPos}}}generateLevel(t,e){const i=this.levelData[this.currentLevel],s=this.centerFloor(i.floorDimensions,t,e);return this.setCoordinates(i.floorData,s,t)}centerFloor(t,e,i){const{width:s,height:n}=i,o=t.xRange*e,l=t.yRange*e;return{xPos:Math.floor((s-o)/2),yPos:Math.floor((n-l)/2)}}setCoordinates(t,e,i){const n={};return t.forEach(t=>{let o=this.constructTileCoordinates(t,e,i),l=new s(o),r=`[${l.xPos}, ${l.yPos}]`;n[r]=l}),n}constructTileCoordinates(t,e,i){return{x:e.xPos+i*t.x,y:e.yPos+i*t.y,type:t.type,active:t.active}}lookupTile(t){const e=`[${t.xPos}, ${t.yPos}]`;return this.constructedFloor[e]}}},function(t,e){t.exports=class{constructor(){this.gameTimeSeconds=0}resetClock(){this.gameTimeSeconds=0}upTick(){this.gameTimeSeconds+=1}currentTime(){const t=this.gameTimeSeconds,e=t%60;return{minutes:Math.floor(t/60)%60,seconds:e}}}},function(t,e,i){const s={backgroundColor:"rgb(25, 25, 25)",textColor:"rgb(255, 255, 255)",blockColor:"rgb(200, 0, 255)",blockFallingColor:"rgb(255, 0, 0)",tileColors:{start:"rgb(0, 255, 255)",goal:"rgb(0, 255, 0)",none:"rgb(192, 192, 192)",collapsible:"rgb(255, 128, 0)",warp:"rgb(255, 255, 0)",activator:"#FFF",bridge:"rgb(128, 0, 0)"}},n={mediumFontSize:"30px Russo One, sans-serif",largeFontSize:"50px Russo One, sans-serif"},o=new(i(10));t.exports=class{constructor(t){this.ctx=t,this.drawTime=this.drawTime.bind(this)}drawStart(t){const{width:e,height:i}=t;this.ctx.fillStyle=s.backgroundColor,this.ctx.font=n.largeFontSize,this.ctx.fillRect(0,0,e,i),this.ctx.fillStyle=s.textColor,this.ctx.fillText("Click anywhere",e/2-200,i/2),this.ctx.fillText("to begin",e/2-125,i/2+50)}render(t){const{width:e,height:i}=t.boardSize;this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,e,i-100),this.ctx.fillRect(0,i-100,e/2,100),this.ctx.font=n.mediumFontSize,this.ctx.fillStyle=s.textColor,this.ctx.fillText(`Level ${t.levelNumber}`,100,100),this.ctx.fillText(`Moves: ${t.moves}`,e-200,100),this.ctx.fillText(`Falls: ${t.falls}`,100,i-50),this.drawFloor(t.level,t.length)}drawFloor(t,e){for(var i in t){let n=t[i];this.ctx.fillStyle=s.tileColors[n.type];const{xPos:o,yPos:l}=n;this.ctx.fillRect(o,l,e,e),this.ctx.strokeRect(o,l,e,e)}}drawMenu(t){const{width:e,height:i}=t;this.ctx.font=n.largeFontSize,this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,e,i),this.ctx.fillStyle=s.textColor,this.ctx.fillText("Blockhead",e/2-125,i/4),this.ctx.font=n.mediumFontSize,this.ctx.fillText("a game by Michael Johnson",e/2-200,i/3)}drawControls(t){const{width:e,height:i}=t;this.ctx.font=n.largeFontSize,this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,e,i),this.ctx.fillStyle=s.textColor,this.ctx.fillText("Controls:",e/2-100,i/4),this.ctx.font=n.mediumFontSize,this.ctx.fillText("Up: up-arrow",e/2-100,3*i/8),this.ctx.fillText("Down: down-arrow",e/2-100,i/2),this.ctx.fillText("Left: left-arrow",e/2-100,5*i/8),this.ctx.fillText("Right: right-arrow",e/2-100,3*i/4)}stringifyTime(){const{minutes:t,seconds:e}=o.currentTime();return`${t<10?`0${t}`:t}:${e<10?`0${e}`:e}`}drawTime(t){const{width:e,height:i}=t,l=this.stringifyTime();this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(e/2,i-100,e/2,100),this.ctx.font=n.mediumFontSize,this.ctx.fillStyle=s.textColor,this.ctx.fillText(l,e-200,i-50),o.upTick()}drawBlock(t){const{xPos:e,yPos:i,width:n,height:o}=t;this.ctx.fillStyle=s.blockColor,this.ctx.fillRect(e,i,n,o),this.ctx.strokeRect(e,i,n,o)}stringifyRGBData(t){return"rgb(".concat(t[0]).concat(", ").concat(t[1]).concat(", ").concat(t[2]).concat(")")}tileMovesOffFloor(t){for(let e=0;e<t.length;e++){let i=t[e],n=this.ctx.getImageData(i[0],i[1],1,1).data.slice(0,3);if(this.stringifyRGBData(n)===s.backgroundColor)return!0}return!1}drawPause(t){const{width:e,height:i}=t;this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,e,i),this.ctx.font=n.largeFontSize,this.ctx.fillStyle=s.textColor,this.ctx.fillText("Pause",e/2-100,i/2),this.ctx.font=n.mediumFontSize}drawFail(t){const{xPos:e,yPos:i,width:n,height:o}=t;this.ctx.fillStyle=s.blockFallingColor,this.ctx.fillRect(e,i,n,o)}drawQuit(t){const{width:e,height:i}=t;this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,e,i),this.ctx.font=n.largeFontSize,this.ctx.fillStyle=s.textColor,this.ctx.fillText("Really quit?",e/2-100,i/2)}drawFinish(t){const e=this.stringifyTime();o.resetClock();const{width:i,height:l}=t.boardSize;this.ctx.fillStyle=s.backgroundColor,this.ctx.fillRect(0,0,i,l),this.ctx.font=n.largeFontSize,this.ctx.fillStyle=s.textColor,this.ctx.fillText("Final Tally:",i/2-200,l/5),this.ctx.font=n.mediumFontSize,this.ctx.fillText(`Final Level Completed: ${t.levelNumber-1}`,i/2-150,3*l/10),this.ctx.fillText(`Moves: ${t.moves}`,i/2-150,2*l/5),this.ctx.fillText(`Falls: ${t.falls}`,i/2-150,l/2),this.ctx.fillText(`Time: ${e}`,i/2-150,3*l/5),this.ctx.fillText("Click to start over",i/2-200,7*l/10)}}},function(t,e){function i(t){const e=[{text:"←",id:"left",event:t.left},{text:"↑",id:"top",event:t.up},{text:"→",id:"right",event:t.right},{text:"↓",id:"bottom",event:t.down}];!1===t.pauseStatus?e.forEach(t=>s(t)):e.forEach(t=>n(t))}function s({id:t,text:e,event:i}){const s=document.getElementById("canvas-container"),n=document.createElement("button");n.setAttribute("id",t),n.innerText=e,n.addEventListener("click",i),s.appendChild(n)}function n({id:t,event:e}){const i=document.getElementById(t);null!==i&&(i.removeEventListener("click",e),i.parentNode.removeChild(i))}t.exports={pause:function(t){t.pauseStatus=!t.pauseStatus,!0===t.pauseStatus?function(t){clearInterval(t.timerId),i(t),s({id:"quit-button",text:"Quit",event:t.quit}),document.removeEventListener("keydown",t.move),t.display.drawPause(t.boardSize)}(t):function(t){t.display.render(t.displayOptions()),t.display.drawBlock(t.block),document.addEventListener("keydown",t.move),i(t),n({id:"quit-button",event:t.quit}),null===document.getElementById("pause-button")&&(s({id:"pause-button",text:"Pause",event:t.pause}),n({id:"yes-button",event:this.endGame}),n({id:"no-button",event:this.pause})),t.timerId=setInterval(t.runClock,1e3)}(t)},restartGame:function(t,e,i){e.moves=0,e.falls=0,e.levels.resetCurrentLevel(),i.switchTrack(e.pauseStatus),e.redrawMenu(t),document.getElementById("canvas-container").removeEventListener("click",e.restart)},getMove:function(t,e,i,s){t.preventDefault(),40===t.keyCode||"down"===s?e.transformBlock(0,1*i):39===t.keyCode||"right"===s?e.transformBlock(1*i,0):38===t.keyCode||"up"===s?e.transformBlock(0,-1*i):37!==t.keyCode&&"left"!==s||e.transformBlock(-1*i,0)},setMoveButtons:i,addButton:s,removeButton:n}},function(t,e){t.exports=class{constructor(t,e){this.width=t,this.height=e,this.xPos=void 0,this.yPos=void 0}setPosition(t){this.xPos=t.xPos,this.yPos=t.yPos}resetBlock(t,e){this.width=t,this.height=t,this.xPos=e.xPos,this.yPos=e.yPos}changePosition(t,e){this.xPos+=t,this.yPos+=e}transformBlock(t,e){this.width===this.height?this.expand(t,e):this.checkDimensionsAndMovement(t,e)}expand(t,e){0!==t?this.expandWidth(t,e):this.expandHeight(t,e)}checkDimensionsAndMovement(t,e){this.width>this.height&&0!==t?this.contractWidth(t,e):this.width<this.height&&0!==e?this.contractHeight(t,e):this.changePosition(t,e)}expandWidth(t,e){this.width*=2,t>0?this.changePosition(t,e):this.changePosition(2*t,e)}expandHeight(t,e){this.height*=2,e>0?this.changePosition(t,e):this.changePosition(t,2*e)}contractWidth(t,e){this.width/=2,t>0?this.changePosition(2*t,e):this.changePosition(t,e)}contractHeight(t,e){this.height/=2,e>0?this.changePosition(t,2*e):this.changePosition(t,e)}}},function(t,e,i){const s=i(13),n=i(12),o=i(11),l=i(9),r=i(1),c=i(0),h=new c.GameMusic;t.exports=class{constructor(t,e,i){this.boardSize=i,this.length=e,this.pauseStatus=!0,this.moves=0,this.falls=0,this.display=new o(t),this.levels=new l,this.block=new s(e,e),this.menu=new r,this.move=this.move.bind(this),this.pause=this.pause.bind(this),this.restart=this.restart.bind(this),this.startMenu=this.startMenu.bind(this),this.startGame=this.startGame.bind(this),this.showControls=this.showControls.bind(this),this.redrawMenu=this.redrawMenu.bind(this),this.runClock=this.runClock.bind(this),this.up=this.up.bind(this),this.right=this.right.bind(this),this.left=this.left.bind(this),this.down=this.down.bind(this),this.quit=this.quit.bind(this),this.endGame=this.endGame.bind(this)}start(){this.display.drawStart(this.boardSize),document.getElementById("canvas-container").addEventListener("click",this.startMenu)}startGame(t){t.preventDefault(),this.pauseStatus=!1,n.removeButton({id:"start-button",event:this.startGame}),n.removeButton({id:"controls-button",event:this.showControls}),n.setMoveButtons(this),n.addButton({id:"pause-button",event:this.pause,text:"Pause"}),h.switchTrack(this.pauseStatus),this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.timerId=setInterval(this.runClock,1e3),document.addEventListener("keydown",this.move),this.display.render(this.displayOptions()),this.display.drawBlock(this.block)}startMenu(t){t.preventDefault(),this.menu.start(this.display,this,n),h.setupSoundButton(n.addButton),h.switchTrack(this.pauseStatus),document.getElementById("canvas-container").removeEventListener("click",this.startMenu)}redrawMenu(t){t.preventDefault(),n.removeButton({id:"back-button",event:this.redrawMenu}),this.menu.start(this.display,this,n)}showControls(t){t.preventDefault(),this.menu.controlsMenu(this.display,this,n)}runClock(){this.display.drawTime(this.boardSize)}restart(t){n.restartGame(t,this,h)}move(t){[37,38,39,40].includes(t.keyCode)&&(n.getMove(t,this.block,this.length,null),this.moves+=1,this.checkBlock())}up(t){n.getMove(t,this.block,this.length,"up"),this.moves+=1,this.checkBlock()}right(t){n.getMove(t,this.block,this.length,"right"),this.moves+=1,this.checkBlock()}down(t){n.getMove(t,this.block,this.length,"down"),this.moves+=1,this.checkBlock()}left(t){n.getMove(t,this.block,this.length,"left"),this.moves+=1,this.checkBlock()}pause(t){t.preventDefault(),n.pause(this)}quit(t){t.preventDefault(),this.display.drawQuit(this.boardSize),n.removeButton({id:"pause-button",event:this.pause}),n.removeButton({id:"quit-button",event:this.quit}),n.addButton({id:"yes-button",event:this.endGame,text:"Yes"}),n.addButton({id:"no-button",event:this.pause,text:"No"})}displayOptions(){return{level:this.levels.constructedFloor,levelNumber:this.levels.currentLevel,moves:this.moves,falls:this.falls,length:this.length,boardSize:this.boardSize}}checkBlock(){this.block.width===this.block.height&&this.checkGoal();const{levelData:t,currentLevel:e}=this.levels;void 0!==t[e]&&this.checkBounds()}checkGoal(){const{xPos:t,yPos:e}=this.block,i=this.levels.lookupTile({xPos:t,yPos:e});void 0!==i&&"goal"===i.type&&this.nextLevel()}nextLevel(){c.playGoalSound(),this.levels.nextLevel();const{levelData:t,currentLevel:e}=this.levels;void 0===t[e]?this.endGame():(this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.display.render(this.displayOptions()),this.display.drawBlock(this.block))}endGame(t){this.pauseStatus=!0,void 0!==t?(t.preventDefault(),n.removeButton({id:"yes-button",event:this.endGame}),n.removeButton({id:"no-button",event:this.pause})):(document.removeEventListener("keydown",this.move),n.removeButton({id:"pause-button",event:this.pause}),clearInterval(this.timerId),n.setMoveButtons(this)),this.display.drawFinish(this.displayOptions()),setTimeout(()=>{document.getElementById("canvas-container").addEventListener("click",this.restart)},500)}checkBounds(){const{currentLevel:t,levelData:e}=this.levels,i=this.getCoordinates();this.display.tileMovesOffFloor(i)?this.resetLevel():void 0!==e[t]&&(this.display.render(this.displayOptions()),this.display.drawBlock(this.block),c.playBlockSound(this.block))}getCoordinates(){const{xPos:t,yPos:e,width:i,height:s}=this.block;return[[t+Math.floor(i/4),e+Math.floor(s/4)],[t+Math.floor(3*i/4),e+Math.floor(3*s/4)]]}resetLevel(){this.pauseStatus=!0,document.removeEventListener("keydown",this.move),n.setMoveButtons(this),this.falls+=1,this.flashFailure()}flashFailure(){this.display.render(this.displayOptions()),this.display.drawFail(this.block),c.playFallSound(),this.block.resetBlock(this.length,this.levels.currentStartPosition),setTimeout(()=>{this.pauseStatus=!1,this.display.render(this.displayOptions()),this.display.drawBlock(this.block),document.addEventListener("keydown",this.move),n.setMoveButtons(this)},800)}}},function(t,e,i){const s=i(14);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("blockhead"),e=document.getElementById("canvas-container"),i=t.getContext("2d"),n={width:e.offsetWidth,height:e.offsetHeight};t.width=n.width,t.height=n.height,new s(i,30,n).start()})}]);
//# sourceMappingURL=bundle.js.map