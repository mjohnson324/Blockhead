!function(t){var e={};function y(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,y),i.l=!0,i.exports}y.m=t,y.c=e,y.d=function(t,e,n){y.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},y.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},y.t=function(t,e){if(1&e&&(t=y(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(y.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)y.d(n,i,function(e){return t[e]}.bind(null,i));return n},y.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return y.d(e,"a",e),e},y.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},y.p="",y(y.s=15)}([function(t,e){const y=document.getElementById("block-rectangle"),n=document.getElementById("block-square"),i=document.getElementById("bridge-down"),s=document.getElementById("fall"),o=document.getElementById("complete-level"),p=document.getElementById("warp"),x=document.getElementById("game-song"),l=document.getElementById("menu-song");l.loop=!0,x.loop=!0;t.exports={playBlockSound:function(t){t.height===t.width?n.play():y.play()},playFallSound:function(){s.play()},playGoalSound:function(){o.play()},playWarpSound:function(){p.play()},playBridgeSound:function(){i.play()},GameMusic:class{constructor(){this.playMusic=!0,this.currentMusic=l,this.toggleMusic=this.toggleMusic.bind(this),this.musicButton=null,this.musicDisplay=null}switchTrack(t){const e=!0===t?l:x;this.currentMusic.currentTime=0,!0===this.playMusic?(this.currentMusic.pause(),this.currentMusic=e,this.currentMusic.play()):this.currentMusic=e}setupSoundButton(t){t({id:"music",event:this.toggleMusic,text:null}),function(){const t=document.createElement("i");t.setAttribute("id","music-icon"),t.className="fas fa-volume-up fa-2x",document.getElementById("music").appendChild(t)}(this.musicButton),this.musicButton=document.getElementById("music"),this.musicDisplay=document.getElementById("music-icon"),this.musicButton.addEventListener("click",this.toggleMusic)}toggleMusic(t){t.preventDefault(),!0===this.playMusic?this.pauseMusic():this.resumeMusic()}pauseMusic(){this.playMusic=!1,this.musicDisplay.className="fas fa-volume-mute fa-2x",this.currentMusic.pause()}resumeMusic(){this.playMusic=!0,this.musicDisplay.className="fas fa-volume-up fa-2x",this.currentMusic.play()}}}},function(t,e){t.exports=class{start(t,e,y){t.drawMenu(e.boardSize);const n={id:"start-button",event:e.startGame,text:"Start"},i={id:"controls-button",event:e.showControls,text:"Controls"};y.addButton(n),y.addButton(i)}controlsMenu(t,e,y){t.drawControls(e.boardSize);const n={id:"back-button",event:e.redrawMenu,text:"Back"};y.addButton(n),y.removeButton({id:"start-button",event:e.startGame}),y.removeButton({id:"controls-button",event:e.showControls})}}},function(t,e){t.exports={floorDimensions:{xRange:15,yRange:6},floorData:[{x:1,y:2,type:"s"},{x:13,y:2,type:"g"},{x:0,y:4,type:"n"},{x:0,y:3,type:"n"},{x:0,y:2,type:"n"},{x:0,y:1,type:"n"},{x:1,y:4,type:"n"},{x:1,y:3,type:"n"},{x:1,y:1,type:"n"},{x:2,y:4,type:"n"},{x:2,y:3,type:"n"},{x:2,y:2,type:"n"},{x:2,y:1,type:"n"},{x:3,y:4,type:"n"},{x:3,y:3,type:"n"},{x:3,y:2,type:"n"},{x:3,y:1,type:"n"},{x:4,y:3,type:"n"},{x:5,y:3,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:7,y:5,type:"n"},{x:7,y:4,type:"n"},{x:7,y:3,type:"n"},{x:8,y:5,type:"n"},{x:8,y:4,type:"n"},{x:8,y:3,type:"n"},{x:9,y:5,type:"n"},{x:10,y:5,type:"n"},{x:11,y:5,type:"n"},{x:11,y:4,type:"n"},{x:11,y:3,type:"n"},{x:11,y:2,type:"n"},{x:11,y:1,type:"n"},{x:12,y:5,type:"n"},{x:12,y:4,type:"n"},{x:12,y:3,type:"n"},{x:12,y:2,type:"n"},{x:12,y:1,type:"n"},{x:12,y:0,type:"n"},{x:13,y:3,type:"n"},{x:13,y:1,type:"n"},{x:13,y:0,type:"n"},{x:14,y:3,type:"n"},{x:14,y:2,type:"n"},{x:14,y:1,type:"n"},{x:14,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:5,yRange:5},floorData:[{x:0,y:0,type:"s"},{x:2,y:2,type:"g"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:1,y:0,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:3,y:0,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:3,y:4,type:"n"},{x:4,y:0,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:4,y:4,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:6},floorData:[{x:1,y:1,type:"s"},{x:7,y:4,type:"g"},{x:0,y:0,type:"n"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:1,y:0,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:5,y:1,type:"n"},{x:5,y:2,type:"n"},{x:5,y:3,type:"n"},{x:5,y:4,type:"n"},{x:6,y:2,type:"n"},{x:6,y:3,type:"n"},{x:6,y:4,type:"n"},{x:6,y:5,type:"n"},{x:7,y:2,type:"n"},{x:7,y:3,type:"n"},{x:7,y:5,type:"n"},{x:8,y:2,type:"n"},{x:8,y:3,type:"n"},{x:8,y:4,type:"n"},{x:8,y:5,type:"n"},{x:9,y:3,type:"n"},{x:9,y:4,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:1},floorData:[{x:0,y:0,type:"s"},{x:9,y:0,type:"g"},{x:1,y:0,type:"n"},{x:2,y:0,type:"n"},{x:3,y:0,type:"n"},{x:4,y:0,type:"n"},{x:5,y:0,type:"n"},{x:6,y:0,type:"n"},{x:7,y:0,type:"n"},{x:8,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:14,yRange:10},floorData:[{x:12,y:3,type:"s"},{x:7,y:4,type:"g"},{x:0,y:0,type:"n"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:0,y:5,type:"n"},{x:1,y:0,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:1,y:5,type:"n"},{x:2,y:0,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:2,y:5,type:"n"},{x:2,y:6,type:"n"},{x:2,y:7,type:"n"},{x:3,y:0,type:"c"},{x:3,y:4,type:"c"},{x:3,y:7,type:"n"},{x:3,y:8,type:"n"},{x:3,y:9,type:"n"},{x:4,y:0,type:"n"},{x:4,y:4,type:"c"},{x:4,y:7,type:"n"},{x:4,y:8,type:"n"},{x:4,y:9,type:"n"},{x:5,y:0,type:"n"},{x:5,y:4,type:"c"},{x:5,y:5,type:"c"},{x:5,y:6,type:"c"},{x:5,y:7,type:"c"},{x:5,y:8,type:"c"},{x:5,y:9,type:"n"},{x:6,y:0,type:"n"},{x:6,y:3,type:"n"},{x:6,y:4,type:"n"},{x:6,y:5,type:"n"},{x:6,y:6,type:"c"},{x:6,y:7,type:"c"},{x:6,y:8,type:"c"},{x:7,y:0,type:"n"},{x:7,y:3,type:"n"},{x:7,y:5,type:"n"},{x:7,y:6,type:"c"},{x:7,y:7,type:"n"},{x:7,y:8,type:"c"},{x:8,y:0,type:"c"},{x:8,y:3,type:"n"},{x:8,y:4,type:"n"},{x:8,y:5,type:"n"},{x:8,y:6,type:"c"},{x:8,y:7,type:"c"},{x:8,y:8,type:"c"},{x:8,y:9,type:"n"},{x:9,y:0,type:"n"},{x:9,y:6,type:"c"},{x:9,y:7,type:"c"},{x:9,y:8,type:"c"},{x:9,y:9,type:"n"},{x:10,y:0,type:"n"},{x:10,y:1,type:"n"},{x:10,y:6,type:"n"},{x:10,y:7,type:"c"},{x:10,y:8,type:"c"},{x:11,y:0,type:"n"},{x:11,y:1,type:"n"},{x:11,y:2,type:"n"},{x:11,y:3,type:"n"},{x:11,y:4,type:"n"},{x:11,y:5,type:"n"},{x:11,y:6,type:"n"},{x:12,y:0,type:"n"},{x:12,y:1,type:"n"},{x:12,y:2,type:"n"},{x:12,y:4,type:"n"},{x:13,y:2,type:"n"},{x:13,y:3,type:"n"},{x:13,y:4,type:"n"}]}},function(t,e,y){const n=y(5),i=y(4),s=y(3),o=y(2),p=y(16),x=y(20),l=y(19),c=y(18),r=y(17),a=y(6);t.exports={1:n,2:i,3:s,4:o,5:p,6:x,7:l,8:c,9:r,10:a}},function(t,e){t.exports=class{constructor(t){this.xPos=t.x,this.yPos=t.y,this.type=this.typeReference(t.type),this.active=this.checkActiveStatus(t.active),this.relations=t.relations}typeReference(t){switch(t){case"n":return"none";case"s":return"start";case"g":return"goal";case"c":return"collapsible";case"w":return"warp";case"a":return"activator";case"b":return"bridge"}}checkActiveStatus(t){return void 0===t||t}toggleActive(){"bridge"===this.type&&(this.active=!this.active)}}},function(t,e,y){const n=y(8),i=y(7);t.exports=class{constructor(){this.currentLevel=1,this.levelData=i,this.constructedFloor=null,this.currentStartPosition=null,this.constructTileCoordinates=this.constructTileCoordinates.bind(this)}nextLevel(){this.currentLevel+=1}resetCurrentLevel(){this.currentLevel=1}constructFloor(t,e){this.constructedFloor=this.generateLevel(t,e),this.currentStartPosition=this.getStart(this.constructedFloor)}getStart(t){for(var e in t){let y=t[e];if("start"===y.type)return{xPos:y.xPos,yPos:y.yPos}}}generateLevel(t,e){const y=this.levelData[this.currentLevel],n=this.centerFloor(y.floorDimensions,t,e);return this.setCoordinates(y.floorData,n,t)}centerFloor(t,e,y){const{width:n,height:i}=y,s=t.xRange*e,o=t.yRange*e;return{xPos:Math.floor((n-s)/2),yPos:Math.floor((i-o)/2)}}setCoordinates(t,e,y){const i={};return t.forEach(t=>{let s=this.constructTileCoordinates(t,e,y),o=new n(s),p=`[${o.xPos}, ${o.yPos}]`;i[p]=o}),i}constructTileCoordinates(t,e,y){const n=e.xPos+y*t.x,i=e.yPos+y*t.y;let s=null;return void 0!==t.relations&&(s=[],t.relations.forEach(t=>{let n=e.xPos+y*t[0],i=e.yPos+y*t[1];s.push({xPos:n,yPos:i})})),{x:n,y:i,type:t.type,active:t.active,relations:s}}lookupTile(t){const e=`[${t.xPos}, ${t.yPos}]`;return this.constructedFloor[e]}activate(t){t.forEach(t=>{this.lookupTile(t).toggleActive()})}}},function(t,e){t.exports=class{constructor(){this.gameTimeSeconds=0}resetClock(){this.gameTimeSeconds=0}upTick(){this.gameTimeSeconds+=1}currentTime(){const t=this.gameTimeSeconds,e=t%60;return{minutes:Math.floor(t/60)%60,seconds:e}}}},function(t,e,y){const n={backgroundColor:"rgb(25, 25, 25)",textColor:"rgb(255, 255, 255)",blockColor:"rgb(200, 0, 255)",blockFallingColor:"rgb(255, 0, 0)",tileColors:{start:"rgb(0, 255, 255)",goal:"rgb(0, 255, 0)",none:"rgb(192, 192, 192)",collapsible:"rgb(255, 128, 0)",warp:"rgb(255, 255, 0)",activator:"rgb(255, 255, 255)",bridge:"rgb(160, 0, 0)"}},i={mediumFontSize:"30px Russo One, sans-serif",largeFontSize:"50px Russo One, sans-serif"},s=new(y(10));t.exports=class{constructor(t){this.ctx=t,this.drawTime=this.drawTime.bind(this)}drawStart(t){const{width:e,height:y}=t;this.ctx.fillStyle=n.backgroundColor,this.ctx.font=i.largeFontSize,this.ctx.fillRect(0,0,e,y),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Click anywhere",e/2-200,y/2),this.ctx.fillText("to begin",e/2-125,y/2+50)}render(t){const{width:e,height:y}=t.boardSize;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,y-100),this.ctx.fillStyle=n.textColor,this.ctx.font=i.largeFontSize,this.ctx.fillText(`Level ${t.levelNumber}`,e/2-100,80),this.ctx.font=i.mediumFontSize,this.ctx.fillText(`Moves: ${t.moves}`,e-250,y-150),this.ctx.fillText(`Falls: ${t.falls}`,e-250,y-100),this.drawFloor(t.level,t.length)}drawFloor(t,e){for(var y in t){let i=t[y];this.ctx.fillStyle=i.active?n.tileColors[i.type]:n.backgroundColor;const{xPos:s,yPos:o}=i;this.ctx.fillRect(s,o,e,e),this.ctx.strokeRect(s,o,e,e)}}drawMenu(t){const{width:e,height:y}=t;this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,y),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Blockhead",e/2-125,y/4),this.ctx.font=i.mediumFontSize,this.ctx.fillText("a game by Michael Johnson",e/2-200,y/3)}drawControls(t){const{width:e,height:y}=t;this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,y),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Controls:",e/2-110,y/4),this.ctx.font=i.mediumFontSize,this.ctx.fillText("Up: up-arrow",e/2-90,3*y/8),this.ctx.fillText("Down: down-arrow",e/2-90,y/2),this.ctx.fillText("Left: left-arrow",e/2-90,5*y/8),this.ctx.fillText("Right: right-arrow",e/2-90,3*y/4)}stringifyTime(){const{minutes:t,seconds:e}=s.currentTime();return`Time: ${t<10?`0${t}`:t}:${e<10?`0${e}`:e}`}drawTime(t){const{width:e,height:y}=t,o=this.stringifyTime();this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(e/2,y-100,e/2,100),this.ctx.font=i.mediumFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText(o,e-250,y-50),s.upTick()}drawBlock(t){const{xPos:e,yPos:y,width:i,height:s}=t;this.ctx.fillStyle=n.blockColor,this.ctx.fillRect(e,y,i,s),this.ctx.strokeRect(e,y,i,s)}stringifyRGBData(t){return"rgb(".concat(t[0]).concat(", ").concat(t[1]).concat(", ").concat(t[2]).concat(")")}tileMovesOffFloor(t){for(let e=0;e<t.length;e++){let y=t[e],i=this.ctx.getImageData(y[0],y[1],1,1).data.slice(0,3);if(this.stringifyRGBData(i)===n.backgroundColor)return!0}return!1}drawPause(t){const{width:e,height:y}=t;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,y),this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText("Pause",e/2-100,y/2),this.ctx.font=i.mediumFontSize}drawFail(t){const{xPos:e,yPos:y,width:i,height:s}=t;this.ctx.fillStyle=n.blockFallingColor,this.ctx.fillRect(e,y,i,s)}drawQuit(t){const{width:e,height:y}=t;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,y),this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText("Really quit?",e/2-150,y/2)}drawFinish(t){const e=this.stringifyTime();s.resetClock();const{width:y,height:o}=t.boardSize;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,y,o),this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText("Final Tally:",y/2-200,o/5),this.ctx.font=i.mediumFontSize,this.ctx.fillText(`Final Level Completed: ${t.levelNumber-1}`,y/2-150,3*o/10),this.ctx.fillText(`Moves: ${t.moves}`,y/2-150,2*o/5),this.ctx.fillText(`Falls: ${t.falls}`,y/2-150,o/2),this.ctx.fillText(`${e}`,y/2-150,3*o/5),this.ctx.fillText("Click to start over",y/2-200,7*o/10)}}},function(t,e){function y(t){const e=[{text:"←",id:"left",event:t.left},{text:"↑",id:"top",event:t.up},{text:"→",id:"right",event:t.right},{text:"↓",id:"bottom",event:t.down}];!1===t.pauseStatus?e.forEach(t=>n(t)):e.forEach(t=>i(t))}function n({id:t,text:e,event:y}){const n=document.getElementById("canvas-container"),i=document.createElement("button");i.setAttribute("id",t),i.innerText=e,i.addEventListener("click",y),n.appendChild(i)}function i({id:t,event:e}){const y=document.getElementById(t);null!==y&&(y.removeEventListener("click",e),y.parentNode.removeChild(y))}t.exports={pause:function(t){t.pauseStatus=!t.pauseStatus,!0===t.pauseStatus?function(t){clearInterval(t.timerId),y(t),n({id:"quit-button",text:"Quit",event:t.quit}),document.removeEventListener("keydown",t.move),t.display.drawPause(t.boardSize)}(t):function(t){t.display.render(t.displayOptions()),t.display.drawBlock(t.block),document.addEventListener("keydown",t.move),y(t),i({id:"quit-button",event:t.quit}),null===document.getElementById("pause-button")&&(n({id:"pause-button",text:"Pause",event:t.pause}),i({id:"yes-button",event:this.endGame}),i({id:"no-button",event:this.pause})),t.timerId=setInterval(t.runClock,1e3)}(t)},restartGame:function(t,e,y){e.moves=0,e.falls=0,e.levels.resetCurrentLevel(),y.switchTrack(e.pauseStatus),e.redrawMenu(t),document.getElementById("canvas-container").removeEventListener("click",e.restart)},getMove:function(t,e,y,n){t.preventDefault(),40===t.keyCode||"down"===n?e.transformBlock(0,1*y):39===t.keyCode||"right"===n?e.transformBlock(1*y,0):38===t.keyCode||"up"===n?e.transformBlock(0,-1*y):37!==t.keyCode&&"left"!==n||e.transformBlock(-1*y,0)},setMoveButtons:y,addButton:n,removeButton:i}},function(t,e){t.exports=class{constructor(t,e){this.width=t,this.height=e,this.xPos=void 0,this.yPos=void 0}setPosition(t){this.xPos=t.xPos,this.yPos=t.yPos}resetBlock(t,e){this.width=t,this.height=t,this.xPos=e.xPos,this.yPos=e.yPos}changePosition(t,e){this.xPos+=t,this.yPos+=e}transformBlock(t,e){this.width===this.height?this.expand(t,e):this.checkDimensionsAndMovement(t,e)}expand(t,e){0!==t?this.expandWidth(t,e):this.expandHeight(t,e)}checkDimensionsAndMovement(t,e){this.width>this.height&&0!==t?this.contractWidth(t,e):this.width<this.height&&0!==e?this.contractHeight(t,e):this.changePosition(t,e)}expandWidth(t,e){this.width*=2,t>0?this.changePosition(t,e):this.changePosition(2*t,e)}expandHeight(t,e){this.height*=2,e>0?this.changePosition(t,e):this.changePosition(t,2*e)}contractWidth(t,e){this.width/=2,t>0?this.changePosition(2*t,e):this.changePosition(t,e)}contractHeight(t,e){this.height/=2,e>0?this.changePosition(t,2*e):this.changePosition(t,e)}}},function(t,e,y){const n=y(13),i=y(12),s=y(11),o=y(9),p=y(1),x=y(0),l=new x.GameMusic;t.exports=class{constructor(t,e,y){this.boardSize=y,this.length=e,this.pauseStatus=!0,this.moves=0,this.falls=0,this.display=new s(t),this.levels=new o,this.block=new n(e,e),this.menu=new p,this.move=this.move.bind(this),this.pause=this.pause.bind(this),this.restart=this.restart.bind(this),this.startMenu=this.startMenu.bind(this),this.startGame=this.startGame.bind(this),this.showControls=this.showControls.bind(this),this.redrawMenu=this.redrawMenu.bind(this),this.runClock=this.runClock.bind(this),this.up=this.up.bind(this),this.right=this.right.bind(this),this.left=this.left.bind(this),this.down=this.down.bind(this),this.quit=this.quit.bind(this),this.endGame=this.endGame.bind(this)}start(){this.display.drawStart(this.boardSize),document.getElementById("canvas-container").addEventListener("click",this.startMenu)}startGame(t){t.preventDefault(),this.pauseStatus=!1,i.removeButton({id:"start-button",event:this.startGame}),i.removeButton({id:"controls-button",event:this.showControls}),i.setMoveButtons(this),i.addButton({id:"pause-button",event:this.pause,text:"Pause"}),l.switchTrack(this.pauseStatus),this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.timerId=setInterval(this.runClock,1e3),document.addEventListener("keydown",this.move),this.display.render(this.displayOptions()),this.display.drawBlock(this.block)}startMenu(t){t.preventDefault(),this.menu.start(this.display,this,i),l.setupSoundButton(i.addButton),l.switchTrack(this.pauseStatus),document.getElementById("canvas-container").removeEventListener("click",this.startMenu)}redrawMenu(t){t.preventDefault(),i.removeButton({id:"back-button",event:this.redrawMenu}),this.menu.start(this.display,this,i)}showControls(t){t.preventDefault(),this.menu.controlsMenu(this.display,this,i)}runClock(){this.display.drawTime(this.boardSize)}restart(t){i.restartGame(t,this,l)}move(t){[37,38,39,40].includes(t.keyCode)&&(i.getMove(t,this.block,this.length,null),this.moves+=1,this.checkBlock())}up(t){i.getMove(t,this.block,this.length,"up"),this.moves+=1,this.checkBlock()}right(t){i.getMove(t,this.block,this.length,"right"),this.moves+=1,this.checkBlock()}down(t){i.getMove(t,this.block,this.length,"down"),this.moves+=1,this.checkBlock()}left(t){i.getMove(t,this.block,this.length,"left"),this.moves+=1,this.checkBlock()}pause(t){t.preventDefault(),i.pause(this)}quit(t){t.preventDefault(),this.display.drawQuit(this.boardSize),i.removeButton({id:"pause-button",event:this.pause}),i.removeButton({id:"quit-button",event:this.quit}),i.addButton({id:"yes-button",event:this.endGame,text:"Yes"}),i.addButton({id:"no-button",event:this.pause,text:"No"})}displayOptions(){return{level:this.levels.constructedFloor,levelNumber:this.levels.currentLevel,moves:this.moves,falls:this.falls,length:this.length,boardSize:this.boardSize}}checkBlock(){const{levelData:t,currentLevel:e}=this.levels;if(void 0!==t[e]){const t=this.getCoordinates();this.display.tileMovesOffFloor(t)?this.resetLevel():this.block.width===this.block.height?this.checkTile():this.reRender()}}checkTile(){const{xPos:t,yPos:e}=this.block,y=this.levels.lookupTile({xPos:t,yPos:e});"goal"===y.type?this.nextLevel():"collapsible"===y.type?this.resetLevel():"warp"===y.type?this.warp(y.relations[0]):"activator"===y.type?(this.levels.activate(y.relations),x.playBridgeSound(),this.reRender()):this.reRender()}warp(t){x.playWarpSound(),this.block.setPosition(t),this.reRender()}reRender(){this.display.render(this.displayOptions()),this.display.drawBlock(this.block),x.playBlockSound(this.block)}nextLevel(){x.playGoalSound(),this.levels.nextLevel();const{levelData:t,currentLevel:e}=this.levels;void 0===t[e]?this.endGame():(this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.display.render(this.displayOptions()),this.display.drawBlock(this.block))}endGame(t){this.pauseStatus=!0,void 0!==t?(t.preventDefault(),i.removeButton({id:"yes-button",event:this.endGame}),i.removeButton({id:"no-button",event:this.pause})):(document.removeEventListener("keydown",this.move),i.removeButton({id:"pause-button",event:this.pause}),clearInterval(this.timerId),i.setMoveButtons(this)),this.display.drawFinish(this.displayOptions()),setTimeout(()=>{document.getElementById("canvas-container").addEventListener("click",this.restart)},500)}getCoordinates(){const{xPos:t,yPos:e,width:y,height:n}=this.block;return[[t+Math.floor(y/4),e+Math.floor(n/4)],[t+Math.floor(3*y/4),e+Math.floor(3*n/4)]]}resetLevel(){this.pauseStatus=!0,document.removeEventListener("keydown",this.move),i.setMoveButtons(this),this.falls+=1,this.flashFailure()}flashFailure(){this.display.render(this.displayOptions()),this.display.drawFail(this.block),x.playFallSound(),this.block.resetBlock(this.length,this.levels.currentStartPosition),setTimeout(()=>{this.pauseStatus=!1,this.display.render(this.displayOptions()),this.display.drawBlock(this.block),document.addEventListener("keydown",this.move),i.setMoveButtons(this)},800)}}},function(t,e,y){const n=y(14);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("blockhead"),e=document.getElementById("canvas-container"),y=t.getContext("2d"),i={width:e.offsetWidth,height:e.offsetHeight};t.width=i.width,t.height=i.height,new n(y,30,i).start()})},function(t,e){t.exports={floorDimensions:{xRange:14,yRange:9},floorData:[{x:1,y:5,type:"s"},{x:13,y:7,type:"g"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:0,y:5,type:"n"},{x:0,y:6,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:1,y:6,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:2,y:5,type:"n"},{x:2,y:6,type:"n"},{x:3,y:0,type:"c"},{x:3,y:1,type:"c"},{x:3,y:2,type:"n"},{x:4,y:0,type:"c"},{x:4,y:1,type:"c"},{x:5,y:0,type:"c"},{x:5,y:1,type:"c"},{x:5,y:5,type:"n"},{x:5,y:6,type:"n"},{x:5,y:7,type:"n"},{x:5,y:8,type:"n"},{x:6,y:0,type:"c"},{x:6,y:1,type:"c"},{x:6,y:2,type:"w",relations:[[9,2]]},{x:6,y:5,type:"n"},{x:6,y:6,type:"n"},{x:6,y:7,type:"n"},{x:6,y:8,type:"n"},{x:7,y:5,type:"n"},{x:7,y:6,type:"n"},{x:7,y:7,type:"n"},{x:7,y:8,type:"n"},{x:8,y:5,type:"n"},{x:8,y:6,type:"n"},{x:9,y:2,type:"n"},{x:9,y:5,type:"c"},{x:9,y:6,type:"c"},{x:10,y:2,type:"n"},{x:10,y:3,type:"n"},{x:10,y:4,type:"n"},{x:10,y:5,type:"c"},{x:10,y:6,type:"c"},{x:10,y:7,type:"c"},{x:10,y:8,type:"c"},{x:10,y:9,type:"c"},{x:11,y:2,type:"n"},{x:11,y:3,type:"n"},{x:11,y:4,type:"n"},{x:11,y:5,type:"c"},{x:11,y:6,type:"c"},{x:11,y:7,type:"c"},{x:11,y:8,type:"c"},{x:11,y:9,type:"c"},{x:12,y:5,type:"c"},{x:12,y:6,type:"c"},{x:12,y:7,type:"c"},{x:12,y:8,type:"c"},{x:12,y:9,type:"w",relations:[[6,8]]},{x:13,y:5,type:"c"},{x:13,y:6,type:"c"},{x:13,y:8,type:"c"}]}},function(t,e){t.exports={floorDimensions:{xRange:16,yRange:10},floorData:[{x:14,y:1,type:"s"},{x:1,y:8,type:"g"},{x:0,y:7,type:"n"},{x:0,y:8,type:"n"},{x:0,y:9,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:1,y:7,type:"n"},{x:1,y:9,type:"n"},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:2,y:7,type:"n"},{x:2,y:8,type:"n"},{x:2,y:9,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:3,y:4,type:"n"},{x:3,y:5,type:"n"},{x:3,y:8,type:"n"},{x:3,y:9,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:4,y:4,type:"n"},{x:4,y:5,type:"n"},{x:4,y:8,type:"n"},{x:5,y:1,type:"b",active:!1},{x:5,y:5,type:"n"},{x:5,y:8,type:"b",active:!0},{x:6,y:1,type:"b",active:!1},{x:6,y:5,type:"a",relations:[[8,5],[9,5],[5,8],[6,8]]},{x:6,y:8,type:"b",active:!0},{x:7,y:1,type:"n"},{x:7,y:5,type:"n"},{x:7,y:8,type:"n"},{x:8,y:1,type:"n"},{x:8,y:5,type:"b",active:!1},{x:8,y:8,type:"n"},{x:9,y:1,type:"a",relations:[[5,1],[6,1]]},{x:9,y:5,type:"b",active:!1},{x:9,y:8,type:"n"},{x:10,y:1,type:"n"},{x:10,y:5,type:"n"},{x:10,y:6,type:"n"},{x:10,y:7,type:"n"},{x:10,y:8,type:"n"},{x:11,y:1,type:"n"},{x:11,y:5,type:"n"},{x:11,y:6,type:"n"},{x:11,y:7,type:"n"},{x:11,y:8,type:"n"},{x:12,y:0,type:"n"},{x:12,y:1,type:"n"},{x:12,y:5,type:"n"},{x:12,y:6,type:"n"},{x:12,y:7,type:"n"},{x:12,y:8,type:"n"},{x:13,y:0,type:"n"},{x:13,y:1,type:"n"},{x:13,y:2,type:"n"},{x:13,y:6,type:"n"},{x:13,y:7,type:"n"},{x:14,y:0,type:"n"},{x:14,y:2,type:"n"},{x:14,y:6,type:"a",relations:[[5,8],[6,8]]},{x:14,y:7,type:"n"},{x:15,y:0,type:"n"},{x:15,y:1,type:"n"},{x:15,y:2,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:15,yRange:10},floorData:[{x:4,y:8,type:"s"},{x:7,y:2,type:"g"},{x:0,y:2,type:"b",active:!1},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:0,y:5,type:"n"},{x:1,y:0,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:5,type:"b",active:!1},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:5,type:"b",active:!1},{x:3,y:0,type:"a",relations:[[1,5],[2,5],[0,2]]},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:5,type:"n"},{x:3,y:6,type:"n"},{x:3,y:7,type:"n"},{x:3,y:8,type:"n"},{x:3,y:9,type:"n"},{x:4,y:6,type:"n"},{x:4,y:7,type:"n"},{x:4,y:9,type:"n"},{x:5,y:6,type:"n"},{x:5,y:7,type:"n"},{x:5,y:8,type:"n"},{x:5,y:9,type:"n"},{x:6,y:6,type:"c"},{x:6,y:7,type:"c"},{x:6,y:8,type:"c"},{x:6,y:9,type:"n"},{x:7,y:3,type:"b",active:!1},{x:7,y:4,type:"n"},{x:7,y:5,type:"c"},{x:7,y:6,type:"c"},{x:7,y:7,type:"c"},{x:7,y:8,type:"c"},{x:7,y:9,type:"n"},{x:8,y:2,type:"b",active:!1},{x:8,y:3,type:"b",active:!1},{x:8,y:4,type:"n"},{x:8,y:5,type:"c"},{x:8,y:6,type:"c"},{x:8,y:7,type:"c"},{x:8,y:8,type:"c"},{x:8,y:9,type:"n"},{x:9,y:2,type:"n"},{x:9,y:3,type:"n"},{x:9,y:4,type:"n"},{x:9,y:5,type:"n"},{x:9,y:6,type:"c"},{x:9,y:7,type:"c"},{x:9,y:8,type:"c"},{x:10,y:2,type:"b",active:!0},{x:10,y:6,type:"c"},{x:10,y:7,type:"c"},{x:10,y:8,type:"c"},{x:11,y:2,type:"b",active:!0},{x:11,y:6,type:"n"},{x:11,y:7,type:"n"},{x:11,y:8,type:"n"},{x:12,y:0,type:"n"},{x:12,y:1,type:"n"},{x:12,y:2,type:"n"},{x:12,y:3,type:"n"},{x:12,y:6,type:"n"},{x:12,y:7,type:"w",relations:[[2,0]]},{x:12,y:8,type:"n"},{x:13,y:0,type:"n"},{x:13,y:1,type:"a",relations:[[10,2],[11,2],[8,2],[8,3],[7,3]]},{x:13,y:2,type:"n"},{x:13,y:3,type:"n"},{x:13,y:6,type:"n"},{x:13,y:7,type:"n"},{x:13,y:8,type:"n"},{x:14,y:0,type:"n"},{x:14,y:1,type:"n"},{x:14,y:2,type:"n"},{x:14,y:3,type:"a",relations:[[14,6]]},{x:14,y:4,type:"n"},{x:14,y:5,type:"n"},{x:14,y:6,type:"b",active:!1}]}},function(t,e){t.exports={floorDimensions:{xRange:14,yRange:10},floorData:[{x:0,y:6,type:"s"},{x:13,y:5,type:"g"},{x:1,y:6,type:"n"},{x:2,y:6,type:"n"},{x:3,y:6,type:"n"},{x:4,y:6,type:"n"},{x:4,y:5,type:"n"},{x:4,y:4,type:"n"},{x:5,y:9,type:"n"},{x:5,y:8,type:"n"},{x:5,y:7,type:"n"},{x:5,y:6,type:"n"},{x:5,y:5,type:"n"},{x:5,y:4,type:"n"},{x:6,y:9,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:6,y:2,type:"n"},{x:6,y:1,type:"n"},{x:7,y:9,type:"n"},{x:7,y:2,type:"n"},{x:7,y:1,type:"n"},{x:7,y:0,type:"n"},{x:8,y:9,type:"n"},{x:8,y:8,type:"n"},{x:8,y:7,type:"n"},{x:8,y:2,type:"n"},{x:8,y:1,type:"n"},{x:8,y:0,type:"n"},{x:9,y:9,type:"n"},{x:9,y:8,type:"n"},{x:9,y:7,type:"n"},{x:9,y:3,type:"n"},{x:9,y:2,type:"n"},{x:9,y:1,type:"n"},{x:9,y:0,type:"n"},{x:10,y:9,type:"n"},{x:10,y:8,type:"n"},{x:10,y:7,type:"n"},{x:10,y:3,type:"n"},{x:10,y:2,type:"n"},{x:10,y:1,type:"n"},{x:11,y:7,type:"n"},{x:11,y:6,type:"n"},{x:11,y:5,type:"n"},{x:12,y:7,type:"n"},{x:12,y:6,type:"n"},{x:12,y:5,type:"n"},{x:13,y:6,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:16,yRange:8},floorData:[{x:14,y:2,type:"g"},{x:5,y:6,type:"s"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:2,y:0,type:"w",relations:[[4,2]]},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"w",relations:[[10,2]]},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:4,y:2,type:"w",relations:[[0,2]]},{x:4,y:5,type:"n"},{x:4,y:6,type:"n"},{x:4,y:7,type:"n"},{x:5,y:2,type:"b",active:!1},{x:5,y:5,type:"n"},{x:5,y:7,type:"n"},{x:6,y:2,type:"b",active:!1},{x:6,y:5,type:"n"},{x:6,y:6,type:"n"},{x:6,y:7,type:"n"},{x:7,y:2,type:"a",relations:[[5,2],[6,2]]},{x:7,y:6,type:"n"},{x:8,y:2,type:"a",relations:[[11,2],[12,2]]},{x:8,y:6,type:"n"},{x:9,y:2,type:"n"},{x:9,y:6,type:"n"},{x:10,y:2,type:"n"},{x:10,y:5,type:"n"},{x:10,y:6,type:"n"},{x:10,y:7,type:"n"},{x:11,y:2,type:"b",active:!1},{x:11,y:5,type:"n"},{x:11,y:6,type:"w",relations:[[2,0]]},{x:11,y:7,type:"n"},{x:12,y:2,type:"b",active:!1},{x:12,y:5,type:"n"},{x:12,y:6,type:"n"},{x:12,y:7,type:"n"},{x:13,y:1,type:"n"},{x:13,y:2,type:"n"},{x:13,y:3,type:"n"},{x:14,y:1,type:"n"},{x:14,y:3,type:"n"},{x:15,y:1,type:"n"},{x:15,y:2,type:"n"},{x:15,y:3,type:"n"}]}}]);
//# sourceMappingURL=bundle.js.map