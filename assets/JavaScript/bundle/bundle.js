!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=15)}([function(t,e){const s=document.getElementById("block-rectangle"),n=document.getElementById("block-square"),i=document.getElementById("fall"),o=document.getElementById("complete-level"),r=document.getElementById("game-song"),l=document.getElementById("menu-song");l.loop=!0,r.loop=!0;t.exports={playBlockSound:function(t){t.height===t.width?n.play():s.play()},playFallSound:function(){i.play()},playGoalSound:function(){o.play()},GameMusic:class{constructor(){this.playMusic=!0,this.currentMusic=l,this.musicButton=document.getElementById("music"),this.musicDisplay=document.getElementById("music-icon"),this.toggleMusic=this.toggleMusic.bind(this),this.musicButton=document.getElementById("music"),this.musicButton.addEventListener("click",this.toggleMusic)}startGame(){!0===this.playMusic?(this.currentMusic.pause(),this.currentMusic=r,this.currentMusic.play()):this.currentMusic=r}startMenu(){!0===this.playMusic?(this.currentMusic.pause(),this.currentMusic=l,this.currentMusic.play()):this.currentMusic=l}toggleMusic(t){t.preventDefault(),!0===this.playMusic?this.pauseMusic():this.resumeMusic()}pauseMusic(){this.playMusic=!1,this.musicDisplay.className="fas fa-volume-mute fa-2x",this.currentMusic.pause()}resumeMusic(){this.playMusic=!0,this.musicDisplay.className="fas fa-volume-up fa-2x",this.currentMusic.play()}}}},function(t,e){t.exports=class{constructor(){this.addMenuButton=this.addMenuButton.bind(this),this.removeMenuButton=this.removeMenuButton.bind(this)}start(t,e,s){t.drawMenu(s),this.addMenuButton("start-button",e.startGame),this.addMenuButton("controls-button",e.showControls)}addMenuButton(t,e){const s=document.getElementById("canvas-container"),n=document.createElement("button"),i=t.split("-")[0],o=i.charAt(0).toUpperCase()+i.slice(1);n.setAttribute("id",t),n.innerText=o,n.addEventListener("click",e),s.appendChild(n)}removeMenuButton(t,e){const s=document.getElementById(t);s.removeEventListener("click",e),s.parentNode.removeChild(s)}controlsMenu(t,e,s){t.drawControls(s),this.addMenuButton("back-button",e.redrawMenu),this.removeMenuButton("start-button",e.startGame),this.removeMenuButton("controls-button",e.showControls)}}},function(t,e){t.exports={floorDimensions:{xRange:14,yRange:10},floorData:[{x:0,y:6,type:"s"},{x:13,y:5,type:"g"},{x:1,y:6,type:"n"},{x:2,y:6,type:"n"},{x:3,y:6,type:"n"},{x:4,y:6,type:"n"},{x:4,y:5,type:"n"},{x:4,y:4,type:"n"},{x:5,y:9,type:"n"},{x:5,y:8,type:"n"},{x:5,y:7,type:"n"},{x:5,y:6,type:"n"},{x:5,y:5,type:"n"},{x:5,y:4,type:"n"},{x:6,y:9,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:6,y:2,type:"n"},{x:6,y:1,type:"n"},{x:7,y:9,type:"n"},{x:7,y:2,type:"n"},{x:7,y:1,type:"n"},{x:7,y:0,type:"n"},{x:8,y:9,type:"n"},{x:8,y:8,type:"n"},{x:8,y:7,type:"n"},{x:8,y:2,type:"n"},{x:8,y:1,type:"n"},{x:8,y:0,type:"n"},{x:9,y:9,type:"n"},{x:9,y:8,type:"n"},{x:9,y:7,type:"n"},{x:9,y:3,type:"n"},{x:9,y:2,type:"n"},{x:9,y:1,type:"n"},{x:9,y:0,type:"n"},{x:10,y:9,type:"n"},{x:10,y:8,type:"n"},{x:10,y:7,type:"n"},{x:10,y:3,type:"n"},{x:10,y:2,type:"n"},{x:10,y:1,type:"n"},{x:11,y:7,type:"n"},{x:11,y:6,type:"n"},{x:11,y:5,type:"n"},{x:12,y:7,type:"n"},{x:12,y:6,type:"n"},{x:12,y:5,type:"n"},{x:13,y:6,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:15,yRange:6},floorData:[{x:1,y:2,type:"s"},{x:13,y:2,type:"g"},{x:0,y:4,type:"n"},{x:0,y:3,type:"n"},{x:0,y:2,type:"n"},{x:0,y:1,type:"n"},{x:1,y:4,type:"n"},{x:1,y:3,type:"n"},{x:1,y:1,type:"n"},{x:2,y:4,type:"n"},{x:2,y:3,type:"n"},{x:2,y:2,type:"n"},{x:2,y:1,type:"n"},{x:3,y:4,type:"n"},{x:3,y:3,type:"n"},{x:3,y:2,type:"n"},{x:3,y:1,type:"n"},{x:4,y:3,type:"n"},{x:5,y:3,type:"n"},{x:6,y:5,type:"n"},{x:6,y:4,type:"n"},{x:6,y:3,type:"n"},{x:7,y:5,type:"n"},{x:7,y:4,type:"n"},{x:7,y:3,type:"n"},{x:8,y:5,type:"n"},{x:8,y:4,type:"n"},{x:8,y:3,type:"n"},{x:9,y:5,type:"n"},{x:10,y:5,type:"n"},{x:11,y:5,type:"n"},{x:11,y:4,type:"n"},{x:11,y:3,type:"n"},{x:11,y:2,type:"n"},{x:11,y:1,type:"n"},{x:12,y:5,type:"n"},{x:12,y:4,type:"n"},{x:12,y:3,type:"n"},{x:12,y:2,type:"n"},{x:12,y:1,type:"n"},{x:12,y:0,type:"n"},{x:13,y:3,type:"n"},{x:13,y:1,type:"n"},{x:13,y:0,type:"n"},{x:14,y:3,type:"n"},{x:14,y:2,type:"n"},{x:14,y:1,type:"n"},{x:14,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:6},floorData:[{x:1,y:1,type:"s"},{x:7,y:4,type:"g"},{x:0,y:0,type:"n"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:1,y:0,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:2,type:"n"},{x:2,y:3,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:5,y:1,type:"n"},{x:5,y:2,type:"n"},{x:5,y:3,type:"n"},{x:5,y:4,type:"n"},{x:6,y:2,type:"n"},{x:6,y:3,type:"n"},{x:6,y:4,type:"n"},{x:6,y:5,type:"n"},{x:7,y:2,type:"n"},{x:7,y:3,type:"n"},{x:7,y:5,type:"n"},{x:8,y:2,type:"n"},{x:8,y:3,type:"n"},{x:8,y:4,type:"n"},{x:8,y:5,type:"n"},{x:9,y:3,type:"n"},{x:9,y:4,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:10,yRange:1},floorData:[{x:0,y:0,type:"s"},{x:9,y:0,type:"g"},{x:1,y:0,type:"n"},{x:2,y:0,type:"n"},{x:3,y:0,type:"n"},{x:4,y:0,type:"n"},{x:5,y:0,type:"n"},{x:6,y:0,type:"n"},{x:7,y:0,type:"n"},{x:8,y:0,type:"n"}]}},function(t,e){t.exports={floorDimensions:{xRange:5,yRange:5},floorData:[{x:0,y:0,type:"s"},{x:2,y:2,type:"g"},{x:0,y:1,type:"n"},{x:0,y:2,type:"n"},{x:0,y:3,type:"n"},{x:0,y:4,type:"n"},{x:1,y:0,type:"n"},{x:1,y:1,type:"n"},{x:1,y:2,type:"n"},{x:1,y:3,type:"n"},{x:1,y:4,type:"n"},{x:2,y:0,type:"n"},{x:2,y:1,type:"n"},{x:2,y:3,type:"n"},{x:2,y:4,type:"n"},{x:3,y:0,type:"n"},{x:3,y:1,type:"n"},{x:3,y:2,type:"n"},{x:3,y:3,type:"n"},{x:3,y:4,type:"n"},{x:4,y:0,type:"n"},{x:4,y:1,type:"n"},{x:4,y:2,type:"n"},{x:4,y:3,type:"n"},{x:4,y:4,type:"n"}]}},function(t,e,s){const n=s(6),i=s(5),o=s(4),r=s(3),l=s(2);t.exports={tutorial:n,1:i,2:o,3:r,4:l}},function(t,e){t.exports=class{constructor(t){this.xPos=t.x,this.yPos=t.y,this.type=this.typeReference(t.type),this.active=this.checkActiveStatus(t.active)}typeReference(t){switch(t){case"n":return"none";case"s":return"start";case"g":return"goal";case"c":return"collapsible";case"w":return"warp";case"a":return"activator";case"b":return"bridge"}}checkActiveStatus(t){return void 0===t||t}toggleActive(){"bridge"===this.type&&(this.active=!this.active)}}},function(t,e,s){const n=s(8),i=s(7);t.exports=class{constructor(){this.currentLevel=1,this.levelData=i,this.constructTileCoordinates=this.constructTileCoordinates.bind(this)}nextLevel(){this.currentLevel+=1}resetCurrentLevel(){this.currentLevel=1}constructFloor(t,e){this.constructedFloor=this.generateLevel(t,e),this.currentStartPosition=this.getStart(this.constructedFloor)}getStart(t){for(var e in t){let s=t[e];if("start"===s.type)return{xPos:s.xPos,yPos:s.yPos}}}generateLevel(t,e){const s=this.levelData[this.currentLevel],n=this.centerFloor(s.floorDimensions,t,e);return this.setCoordinates(s.floorData,n,t)}centerFloor(t,e,s){const{width:n,height:i}=s,o=t.xRange*e,r=t.yRange*e;return{xPos:Math.floor((n-o)/2),yPos:Math.floor((i-r)/2)}}setCoordinates(t,e,s){const i={};return t.forEach(t=>{let o=this.constructTileCoordinates(t,e,s),r=new n(o),l=`[${r.xPos}, ${r.yPos}]`;i[l]=r}),i}constructTileCoordinates(t,e,s){return{x:e.xPos+s*t.x,y:e.yPos+s*t.y,type:t.type,active:t.active}}lookupTile(t){const e=`[${t.xPos}, ${t.yPos}]`;return this.constructedFloor[e]}}},function(t,e){t.exports=class{constructor(){this.gameTimeSeconds=0}resetClock(){this.gameTimeSeconds=0}upTick(){this.gameTimeSeconds+=1}currentTime(){const t=this.gameTimeSeconds,e=t%60;return{minutes:Math.floor(t/60)%60,seconds:e}}}},function(t,e,s){const n={backgroundColor:"rgb(25, 25, 25)",textColor:"rgb(255, 255, 255)",blockColor:"rgb(200, 0, 255)",blockFallingColor:"rgb(255, 0, 0)",tileColors:{start:"rgb(0, 255, 255)",goal:"rgb(0, 255, 0)",none:"rgb(192, 192, 192)",collapsible:"rgb(255, 128, 0)",warp:"rgb(255, 255, 0)",activator:"#FFF",bridge:"rgb(128, 0, 0)"}},i={mediumFontSize:"30px Russo One, sans-serif",largeFontSize:"50px Russo One, sans-serif"},o=new(s(10));t.exports=class{constructor(t){this.ctx=t,this.drawTime=this.drawTime.bind(this)}drawStart(t){const{width:e,height:s}=t;this.ctx.fillStyle=n.backgroundColor,this.ctx.font=i.largeFontSize,this.ctx.fillRect(0,0,e,s),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Click anywhere",e/2-200,s/2),this.ctx.fillText("to begin",e/2-125,s/2+50)}render(t){const{width:e,height:s}=t.boardSize;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,s-100),this.ctx.fillRect(0,s-100,e/2,100),this.ctx.font=i.mediumFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText(`Level ${t.levelNumber}`,100,100),this.ctx.fillText(`Moves: ${t.moves}`,e-200,100),this.ctx.fillText(`Falls: ${t.falls}`,100,s-50),this.drawFloor(t.level,t.length)}drawFloor(t,e){for(var s in t){let i=t[s];this.ctx.fillStyle=n.tileColors[i.type];const{xPos:o,yPos:r}=i;this.ctx.fillRect(o,r,e,e),this.ctx.strokeRect(o,r,e,e)}}drawMenu(t){const{width:e,height:s}=t;this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,s),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Blockhead:",e/2-125,s/4),this.ctx.font=i.mediumFontSize,this.ctx.fillText("a game by Michael Johnson",e/2-200,s/3)}drawControls(t){const{width:e,height:s}=t;this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,s),this.ctx.fillStyle=n.textColor,this.ctx.fillText("Controls:",e/2-100,s/4),this.ctx.font=i.mediumFontSize,this.ctx.fillText("Up: up-arrow",e/2-100,3*s/8),this.ctx.fillText("Down: down-arrow",e/2-100,s/2),this.ctx.fillText("Left: left-arrow",e/2-100,5*s/8),this.ctx.fillText("Right: right-arrow",e/2-100,3*s/4),this.ctx.fillText("Pause: enter",e/2-100,7*s/8)}stringifyTime(){const{minutes:t,seconds:e}=o.currentTime();return`${t<10?`0${t}`:t}:${e<10?`0${e}`:e}`}drawTime(t){const{width:e,height:s}=t,r=this.stringifyTime();this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(e/2,s-100,e/2,100),this.ctx.font=i.mediumFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText(r,e-200,s-50),o.upTick()}drawBlock(t){const{xPos:e,yPos:s,width:i,height:o}=t;this.ctx.fillStyle=n.blockColor,this.ctx.fillRect(e,s,i,o),this.ctx.strokeRect(e,s,i,o)}stringifyRGBData(t){return"rgb(".concat(t[0]).concat(", ").concat(t[1]).concat(", ").concat(t[2]).concat(")")}tileMovesOffFloor(t){for(let e=0;e<t.length;e++){let s=t[e],i=this.ctx.getImageData(s[0],s[1],1,1).data.slice(0,3);if(this.stringifyRGBData(i)===n.backgroundColor)return!0}return!1}drawPause(t){const{width:e,height:s}=t;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,e,s),this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText("Pause",e/2-100,s/2),this.ctx.font=i.mediumFontSize}drawFail(t){const{xPos:e,yPos:s,width:i,height:o}=t;this.ctx.fillStyle=n.blockFallingColor,this.ctx.fillRect(e,s,i,o)}drawFinish(t){const e=this.stringifyTime();o.resetClock();const{width:s,height:r}=t.boardSize;this.ctx.fillStyle=n.backgroundColor,this.ctx.fillRect(0,0,s,r),this.ctx.font=i.largeFontSize,this.ctx.fillStyle=n.textColor,this.ctx.fillText("Final Tally:",s/2-200,r/5),this.ctx.font=i.mediumFontSize,this.ctx.fillText(`Moves: ${t.moves}`,s/2-100,3*r/10),this.ctx.fillText(`Falls: ${t.falls}`,s/2-100,2*r/5),this.ctx.fillText(`Time: ${e}`,s/2-100,r/2),this.ctx.fillText("Press enter to start over",s/2-200,3*r/5)}}},function(t,e){t.exports={pause:function(t){t.pauseStatus=!t.pauseStatus,!0===t.pauseStatus?function(t){clearInterval(t.timerId),document.removeEventListener("keydown",t.move),t.display.drawPause(t.boardSize)}(t):function(t){t.display.render(t.displayOptions()),t.display.drawBlock(t.block),document.addEventListener("keydown",t.move),t.timerId=setInterval(t.runClock,1e3)}(t)},restartGame:function(t,e,s){13===t.keyCode&&(t.preventDefault(),e.moves=0,e.falls=0,e.pauseStatus=!0,e.levels.resetCurrentLevel(),s.startMenu(),e.redrawMenu(t),document.removeEventListener("keydown",e.restart))},getMove:function(t,e,s){switch(t.preventDefault(),t.keyCode){case 40:e.transformBlock(0,1*s);break;case 38:e.transformBlock(0,-1*s);break;case 37:e.transformBlock(-1*s,0);break;case 39:e.transformBlock(1*s,0)}}}},function(t,e){t.exports=class{constructor(t,e){this.width=t,this.height=e,this.xPos=void 0,this.yPos=void 0}setPosition(t){this.xPos=t.xPos,this.yPos=t.yPos}resetBlock(t,e){this.width=t,this.height=t,this.xPos=e.xPos,this.yPos=e.yPos}changePosition(t,e){this.xPos+=t,this.yPos+=e}transformBlock(t,e){this.width===this.height?this.expand(t,e):this.checkDimensionsAndMovement(t,e)}expand(t,e){0!==t?this.expandWidth(t,e):this.expandHeight(t,e)}checkDimensionsAndMovement(t,e){this.width>this.height&&0!==t?this.contractWidth(t,e):this.width<this.height&&0!==e?this.contractHeight(t,e):this.changePosition(t,e)}expandWidth(t,e){this.width*=2,t>0?this.changePosition(t,e):this.changePosition(2*t,e)}expandHeight(t,e){this.height*=2,e>0?this.changePosition(t,e):this.changePosition(t,2*e)}contractWidth(t,e){this.width/=2,t>0?this.changePosition(2*t,e):this.changePosition(t,e)}contractHeight(t,e){this.height/=2,e>0?this.changePosition(t,2*e):this.changePosition(t,e)}}},function(t,e,s){const n=s(13),i=s(12),o=s(11),r=s(9),l=s(1),y=s(0),c=new y.GameMusic;t.exports=class{constructor(t,e,s){this.boardSize=s,this.length=e,this.pauseStatus=!0,this.moves=0,this.falls=0,this.display=new o(t),this.levels=new r,this.block=new n(e,e),this.menu=new l(this.display,s),this.move=this.move.bind(this),this.pause=this.pause.bind(this),this.restart=this.restart.bind(this),this.startMenu=this.startMenu.bind(this),this.startGame=this.startGame.bind(this),this.showControls=this.showControls.bind(this),this.redrawMenu=this.redrawMenu.bind(this),this.runClock=this.runClock.bind(this)}start(){this.display.drawStart(this.boardSize),document.getElementById("canvas-container").addEventListener("click",this.startMenu)}startGame(t){t.preventDefault(),this.pauseStatus=!1,this.menu.removeMenuButton("start-button",this.startGame),this.menu.removeMenuButton("controls-button",this.showControls),c.startGame(),this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.timerId=setInterval(this.runClock,1e3),document.addEventListener("keydown",this.move),document.addEventListener("keydown",this.pause),this.display.render(this.displayOptions()),this.display.drawBlock(this.block)}startMenu(t){t.preventDefault(),this.menu.start(this.display,this,this.boardSize),c.resumeMusic(),document.getElementById("canvas-container").removeEventListener("click",this.startMenu)}redrawMenu(t){t.preventDefault();const e=document.getElementById("back-button");null!==e&&(e.removeEventListener("click",this.reDrawMenu),e.parentNode.removeChild(e)),this.menu.start(this.display,this,this.boardSize)}showControls(t){t.preventDefault(),this.menu.controlsMenu(this.display,this,this.boardSize)}runClock(){this.display.drawTime(this.boardSize)}restart(t){i.restartGame(t,this,c)}move(t){[37,38,39,40].includes(t.keyCode)&&(i.getMove(t,this.block,this.length),this.moves+=1,this.checkBlock())}pause(t){t.preventDefault(),13===t.keyCode&&i.pause(this)}displayOptions(){return{level:this.levels.constructedFloor,levelNumber:this.levels.currentLevel,moves:this.moves,falls:this.falls,length:this.length,boardSize:this.boardSize}}checkBlock(){this.block.width===this.block.height&&this.checkGoal();const{levelData:t,currentLevel:e}=this.levels;void 0!==t[e]&&this.checkBounds()}checkGoal(){const{xPos:t,yPos:e}=this.block,s=this.levels.lookupTile({xPos:t,yPos:e});void 0!==s&&"goal"===s.type&&this.nextLevel()}nextLevel(){y.playGoalSound(),this.levels.nextLevel();const{levelData:t,currentLevel:e}=this.levels;void 0===t[e]?this.endGame():(this.levels.constructFloor(this.length,this.boardSize),this.block.setPosition(this.levels.currentStartPosition),this.display.render(this.displayOptions()),this.display.drawBlock(this.block))}endGame(){document.removeEventListener("keydown",this.move),document.removeEventListener("keydown",this.pause),clearInterval(this.timerId),this.display.drawFinish(this.displayOptions()),document.addEventListener("keydown",this.restart)}checkBounds(){const{currentLevel:t,levelData:e}=this.levels,s=this.getCoordinates();this.display.tileMovesOffFloor(s)?this.resetLevel():void 0!==e[t]&&(this.display.render(this.displayOptions()),this.display.drawBlock(this.block),y.playBlockSound(this.block))}getCoordinates(){const{xPos:t,yPos:e,width:s,height:n}=this.block;return[[t+Math.floor(s/4),e+Math.floor(n/4)],[t+Math.floor(3*s/4),e+Math.floor(3*n/4)]]}resetLevel(){document.removeEventListener("keydown",this.move),this.falls+=1,this.flashFailure()}flashFailure(){this.display.render(this.displayOptions()),this.display.drawFail(this.block),y.playFallSound(),this.block.resetBlock(this.length,this.levels.currentStartPosition),setTimeout(()=>{this.display.render(this.displayOptions()),this.display.drawBlock(this.block),document.addEventListener("keydown",this.move)},800)}}},function(t,e,s){const n=s(14);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("blockhead"),e=document.getElementById("canvas-container"),s=t.getContext("2d"),i={width:e.offsetWidth,height:e.offsetHeight};t.width=i.width,t.height=i.height,new n(s,30,i).start()})}]);
//# sourceMappingURL=bundle.js.map